<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>jq deferred</title>
  <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>


  <script type="text/javascript">
    function wait(dtd) {　　　　
      // var dtd = $.Deferred(); //在函数内部，新建一个Deferred对象
      var tasks = function() {　　　　　　
        alert("执行完毕！");　　　　　　
        dtd.resolve(); // 改变Deferred对象的执行状态
      };
      setTimeout(tasks, 3000);　　　　
      // return dtd.promise(); // 返回promise对象
    };　　
    $.Deferred(wait)
      .done(function() {
        alert("哈哈，成功了！");
      })
      .fail(function() {
        alert("出错啦！");
      });
  </script>
</body>

</html>
