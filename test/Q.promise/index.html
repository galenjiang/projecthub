<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>q.promise</title>
</head>

<body>



  <script type="text/javascript" src="q.min.js"></script>
  <script type="text/javascript">
    // console.log(Q)

    /*
        // fcall  普通函数promise化
        function read(text,callback){
          return text
        }


        Q.fcall(read,1,function(text){
        }).then(function(res){
          console.log(res)
        }).catch(function(err){
          alert(err)
        })

    */

    /*
          // 去node化
          function read(a,callback){
            callback(null,a)
          }

          var Qread = Q.denodeify(read);
          Qread(1).then(function(res){
            console.log(res)
          }).catch(function(err){
            alert(err)
          })

      */


    /*
          // defer methods
        function read(text){
          var defferObj = Q.defer();
          if(text === 1){
            defferObj.resolve('this argument is 1')
          }else{
            defferObj.reject('this argument is not 1')
          }
          return defferObj.promise;
        }
        read(1).then(function(res){
          console.log(res)
        }).catch(function(err){
          alert(err)
        })
    */

    /*
              // standard
              Q.Promise(function(resolve, reject){
                setTimeout(function(){
                  resolve(1)
                },1000)
              }).then(function(text){
                console.log(text)
              }).catch(function(err){
                alert(err)
              })

    */

    // Q.all    &     Q.allSettled
    Q.allSettled([
      Q.promise(function(resolve, reject) {
        setTimeout(function() {
          resolve();
        }, 1000)
      }),
      Q.promise(function(resolve, reject) {
        // reject(); //测试
        setTimeout(function() {
          resolve();
        }, 2000)
      })
    ]).then(function(res) {
      console.log(res)
    }).catch(function(err){
      alert(err)
    })
  </script>
</body>

</html>
