new Vue({mixins:[Mui.vueMixinInit],components:{"mui-show-picture":Mui.showPiture},el:"#app",data:{userdata:{},activityList:[],page:1,totalpage:1,allowrefresh:!0},methods:{init:function(){this.getActivityList(),this.updateUserInfo()},getActivityList:function(){this.allowrefresh&&this.page<=this.totalpage&&(this.allowrefresh=!1,Vue.http.get(url+"index.php?m=Api&c=Active&a=active_list",{mall_id:this.userdata.current_mall_id,page:this.page}).then(function(i){if(1==i.data.status){util.console.log(i.data.data);var t=_.map(i.data.data.list,function(i){var t={img:url+i.img,textUpper:i.active_name,textLower:i.begin_time+"-"+i.end_time};switch(i.type){case"public":t.url=url+"index.php?m=Home&c=Activity&a=activity_detail_original&id="+i.id;break;case"booking":t.url=url+"index.php?m=Home&c=Activity&a=activity_detail_join&id="+i.id;break;case"shake":t.url=url+"index.php?m=Home&c=Activity&a=activity_detail_shake&id="+i.id;break;default:t.url=url+"index.php?m=Home&c=Activity&a=activity_detail_original&id="+i.id}return t});this.activityList=_.concat(t,this.activityList),this.page+=1}else Mui.message.toast({msg:i.data.info});this.allowrefresh=!0}.bind(this))["catch"](function(i){util.console.log(i.data),this.allowrefresh=!0}))}},beforeCompile:function(){},ready:function(){}});