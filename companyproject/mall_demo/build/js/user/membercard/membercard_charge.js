var app=new Vue({mixins:[Mui.vueMixinInit],el:"#membercard_charge",data:{userdata:{},list:{},listNum:"",chargeId:-1,bannerList:[]},methods:{init:function(){this.getIntegralChargeList(),this.getBannerList()},getIntegralChargeList:function(){Vue.http.get(url+"index.php?m=Api&c=IntegralGift&a=getintegralcz&=1",{mall_id:this.userdata.current_mall_id}).then(function(t){1==t.data.status?(util.console.log(t.data.data),this.list=_.map(t.data.data,function(t){return t})):Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){alert(t)})},getBannerList:function(){Vue.http.get(url+"index.php?m=Api&c=Banner&a=adver",{place:3,mall_id:this.userdata.current_mall_id}).then(function(t){1==t.data.status?(this.bannerList=_.map(t.data.data,function(t){return t.img=url+t.img,t}),this.$nextTick(function(){Swipe(document.getElementById("slider"),{auto:3e3,continuous:!0})})):Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){alert(t)})},chargeType:function(t){this.chargeId=t},pay:function(){return-1==this.chargeId?(Mui.message.toast({msg:"请选择积分充值"}),!1):void Vue.http.get(url+"index.php?m=Api&c=IntegralGift&a=comment_integral_order",{mall_id:this.userdata.current_mall_id,id:this.chargeId}).then(function(t){if(0==t.data.status)Mui.message.toast({msg:"请选择积分充值"});else{if("object"!=typeof t.data)throw new Error("系统错误");wechat.pay(t.data,function(t){"get_brand_wcpay_request:ok"==t.err_msg?window.location.href=url+"index.php?m=Home&c=User&a=membercard_charge_success":"get_brand_wcpay_request:cancel"==t.err_msg||Mui.message.toast({msg:"付款失败，请稍后再试"})})}}.bind(this))["catch"](function(t){alert(t)})}}});