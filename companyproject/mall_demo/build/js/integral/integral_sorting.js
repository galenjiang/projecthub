new Vue({mixins:[Mui.vueMixinInit],components:{"mui-countdown":Mui.countDown},el:"#app",data:{userdata:{},list:{},id:0,type:"",page:1,totalpage:1,allowrefresh:!0,time:0},methods:{init:function(){this.getList()},getList:function(){if(util.console.log(this.allowrefresh,this.page<=this.totalpage),this.allowrefresh&&this.page<=this.totalpage){this.allowrefresh=!1;var t="";t=99==this.weight?url+"index.php?m=Api&c=IntegralGift&a=getGift":url+"index.php?m=Api&c=IntegralGift&a=class_list",Vue.http.get(t,{mall_id:this.userdata.current_mall_id,is_exchange:1,class_id:this.id,page:this.page}).then(function(t){if(this.allowrefresh=!0,util.console.log(t.data.data),1==t.data.status){this.totalpage=t.data.data.totalpage;var i=_.map(t.data.data.list,function(t){return t.coverimg=url+t.coverimg,t.endtime=Number(t.endtime),99==this.weight?t.href=url+"index.php?m=Home&c=Integral&a=integral_info&limit=1&id="+t.id:t.href=url+"index.php?m=Home&c=Integral&a=integral_info&limit=0&id="+t.id,t}.bind(this));this.list=_.concat(this.list,i),this.page+=1}else Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){this.allowrefresh=!0,alert(t)})}}},created:function(){var t=util.urlQuery();this.id=t.id,this.weight=t.weight,this.type=decodeURIComponent(t.name)}});