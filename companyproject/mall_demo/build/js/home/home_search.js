var app=new Vue({mixins:[Mui.vueMixinInit],components:{"mui-show-picture":Mui.showPiture,"mui-countdown":Mui.countDown},el:"#app",data:{userdata:{},orShow:!1,dictionary:"",type:"searchshop",choose:"searchshop",favList:[],searchList:[],loading:!1,page:1,totalpage:1},computed:{typeName:function(){var t="商户";switch(this.type){case"searchshop":t="商户";break;case"searchinter":t="积分";break;case"searchactive":t="活动";break;default:t="商户"}return t}},methods:{init:function(){this.getFavList()},search:function(){return this.dictionary?(this.page=1,this.totalpage=1,this.searchList=[],this.choose=this.type,this.getList(),void event.preventDefault()):(Mui.message.toast({msg:"请输入搜索字段"}),this.searchList=[],event.preventDefault(),!1)},getFavList:function(){Vue.http.get(url+"index.php?m=Api&c=Search&a=search_hot",{mall_id:this.userdata.current_mall_id}).then(function(t){1==t.data.status?(util.console.log(t.data.data),this.favList=_.map(t.data.data,function(t){return t}.bind(this))):Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){alert(t)})},favsearch:function(t,i){this.page=1,this.totalpage=1,this.searchList=[],this.dictionary=t,this.type=i,this.choose=i,this.getList()},getList:function(){!this.loading&&this.page<=this.totalpage&&(this.loading=!0,Vue.http.get(url+"index.php?m=Api&c=Search",{mall_id:this.userdata.mall_id,key:this.dictionary,a:this.choose}).then(function(t){if(this.loading=!1,util.console.log(t.data.data),1==t.data.status){util.console.log(t.data.data.list);var i=_.map(t.data.data.list,function(t){var i={};return"searchshop"==this.choose?(i.url=url+"index.php?m=Home&c=Brand&a=brand_detail&id="+t.id,i.img=url+t.image,i.textUpper=t.name,i.textLower=t.floor+"-"+t.house_number):"searchinter"==this.choose?(t.img=url+t.coverimg,t.endtime=parseInt(t.endtime),t.numbers?t.url=url+"index.php?m=Home&c=Integral&a=integral_info&limit=1&id="+t.id:t.url=url+"index.php?m=Home&c=Integral&a=integral_info&limit=0&id="+t.id,i=t):"searchactive"==this.choose&&(i.url=url+"index.php?m=Home&c=Activity&a=activity_detail_original&id="+t.id,i.img=url+t.img,i.textUpper=t.active_name,i.textLower=t.begin_time+"-"+t.end_time),i}.bind(this));this.searchList=_.concat(this.searchList,i),this.page+=1,this.totalpage=t.data.data.totalpage}else Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){this.loading=!1,alert(t)}.bind(this)))},checkType:function(){this.orShow?this.orShow=!1:this.orShow=!0,event.stopPropagation()},checkList:function(t){this.type=t,this.orShow=!1,event.preventDefault()},hidehint:function(){this.orShow=!1}}});