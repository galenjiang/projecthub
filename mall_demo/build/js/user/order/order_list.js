var app=new Vue({mixins:[Mui.vueMixinInit],el:"#orderWaiting",components:{"mui-tabs":Mui.tabs},data:{userdata:{},tablist:[{name:"待领取"},{name:"已完成"},{name:"已取消"}],status:0,list:[],page:1,totalpage:1,loading:!1},methods:{init:function(){this.getList()},getList:function(){!this.loading&&this.page<=this.totalpage&&Vue.http.get(url+"index.php?m=Api&c=UserOrder&a=integalorder",{page:this.page,status:this.status+1}).then(function(t){if(util.console.log(t.data),1==t.data.status){this.page+=1,this.totalpage=t.data.data.totalpage;var a=_.map(t.data.data.list,function(t){switch(this.status){case 0:t.type="待领取";break;case 1:t.type="已完成";break;case 2:t.type="已取消";break;default:t.type="系统错误"}return t.commentUrl=url+"index.php?m=Home&c=User&a=order_comment&id="+t.id,t}.bind(this));this.list=_.concat(this.list,a)}else Mui.message.toast({msg:t.data})}.bind(this))["catch"](function(t){alert(t)})},cancel:function(t){util.console.log(t),Vue.http.get(url+"index.php?m=Api&c=UserOrder&a=resetOrder",{order_card:t}).then(function(t){1==t.data.status?(util.console.log(t.data),this.page=1,this.totalpage=1,this.getList()):Mui.message.toast({msg:t.data.info})}.bind(this))}},events:{tab:function(t){this.status=t}},watch:{status:function(){this.page=1,this.totalpage=1,this.init()}}});