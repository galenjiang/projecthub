var app=new Vue({mixins:[Mui.vueMixinInit],components:{"mui-tabs":Mui.tabs,"mui-coupon":Mui.coupon},el:"#app",data:{tabList:[{name:"当前卡券"},{name:"历史卡券"}],couponList:[],index:0,page:1,totalpage:1,allowrefresh:!0},methods:{init:function(){this.getList()},getList:function(){this.allowrefresh&&this.page<=this.totalpage&&(this.allowrefresh=!1,Vue.http.get(url+"index.php?m=Api&c=User&a=coupon_user",{status:this.index}).then(function(t){this.allowrefresh=!0,this.page+=1,this.totalpage=t.data.data.totalpage,util.console.log(t.data.data.list);var i=_.map(t.data.data.list,function(t){return 0==this.index?t.status=0:1==t.is_checked?t.status=2:t.status=1,{img:url+t.img,status:t.status,url:url+"index.php?m=Home&c=User&a=mallcard_detail&id="+t.id}}.bind(this));this.couponList=_.concat(this.couponList,i),util.console.log(this.couponList)}.bind(this))["catch"](function(t){this.allowrefresh=!0,alert(t)}.bind(this)))}},events:{tab:function(t){this.index=t,this.page=1,this.totalpage=1,this.couponList=[],this.getList()}}});