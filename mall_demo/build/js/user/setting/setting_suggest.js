new Vue({mixins:[Mui.vueMixinInit],el:"#setting_suggest",components:{"mui-upload-picture":Mui.uploadPicture},data:{userdata:{},sendObj:{mall_id:"",title:"",content:"",img:[]},imgArr:[],imgList:1},events:{img:function(t){util.console.log(t.index);var i=_.findIndex(this.imgArr,function(i){return i.index==t.index});if(-1!=i){var e=_.slice(this.imgArr);e[i]=t}else this.imgArr=_.concat(this.imgArr,t);this.sendObj.img=_.map(this.imgArr,function(t){return t.img})},close:function(t){this.imgArr=_.filter(this.imgArr,function(i){return i.index!=t}),this.sendObj.img=_.map(this.imgArr,function(t){return t.img})}},methods:{init:function(){this.sendObj.mall_id=this.userdata.current_mall_id},add:function(){this.imgList+=1,event.preventDefault()},sendSuggest:function(){/.+/.test(this.sendObj.title)?/.+/.test(this.sendObj.content)?(util.console.log(this.sendObj),Vue.http.get(url+"index.php?m=Api&c=Mall&a=addfeedback",this.sendObj).then(function(t){1==t.data.status?(util.console.log(t),window.location.href=url+"index.php?m=Home&c=User&a=setting_suggest_success"):Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){alert(t)})):Mui.message.toast({msg:"请填写反馈意见"}):Mui.message.toast({msg:"请填写标题"})}}});