new Vue({mixins:[Mui.vueMixinInit],components:{"mui-banner":Mui.banner,"mui-show-picture":Mui.showPiture},el:"#app",data:{userdata:{},bannerList:[],activityList:[],menuShow:!1,mall:0,loading:!1,page:1,totalpage:1},methods:{init:function(){this.getBannerList(),this.getActivityList()},tabMenu:function(t){this.menuShow?this.menuShow=!1:this.menuShow=!0,t.preventDefault()},collapseMenu:function(t){this.menuShow=!1,t.preventDefault()},tap:function(){Mui.message.toast({msg:"敬请期待"})},getBannerList:function(){Vue.http.get(url+"index.php?m=Api&c=Mall&a=mallIndex",{mall_id:this.userdata.current_mall_id}).then(function(t){this.loading=!1,1==t.data.status?(this.bannerList=_.map(t.data.data.banner,function(t){return t.img=url+t.img,t}),this.$nextTick(function(){Swipe(document.getElementById("slider"),{auto:3e3,continuous:!0,transitionEnd:function(t){for(var i=document.querySelectorAll(".indicator"),a=0;a<i.length;a++)i[a].classList.remove("active");i[t%i.length].classList.add("active")}})})):Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){alert(t)})},getActivityList:function(){!this.loading&&this.page<=this.totalpage&&(this.loading=!0,Vue.http.get(url+"index.php?m=Api&c=Active&a=active_list",{mall_id:this.userdata.current_mall_id,page:this.page}).then(function(t){if(this.loading=!1,1==t.data.status){this.totalpage=t.data.data.totalpage,this.page+=1;var i=_.map(t.data.data.list,function(t){var i={img:url+t.img,textUpper:t.active_name,textLower:t.begin_time+"-"+t.end_time};switch(t.type){case"public":i.url=url+"index.php?m=Home&c=Activity&a=activity_detail_original&id="+t.id;break;case"booking":i.url=url+"index.php?m=Home&c=Activity&a=activity_detail_join&id="+t.id;break;case"shake":i.url=url+"index.php?m=Home&c=Activity&a=activity_detail_shake&id="+t.id;break;default:i.url=url+"index.php?m=Home&c=Activity&a=activity_detail_original&id="+t.id}return i});this.activityList=_.concat(this.activityList,i)}else Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){this.loading=!1,alert(t)}.bind(this)))}}});