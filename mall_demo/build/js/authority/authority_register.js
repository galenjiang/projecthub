var app=new Vue({mixins:[Mui.vueMixinInit],el:"#registerPage",data:{userdata:{},showStep:!0,stepFirstTransitionType:"mui-tabview-l2r",stepSecondTransitionType:"mui-tabview-l2r",phone:"",passwd:"",verify:"",repeatpasswd:"",fastClick:!0,canSendVeri:!0,verifyContent:"获取验证码",client:2},methods:{init:function(){},nextStep:function(){this.showStep=!1,this.stepFirstTransitionType="mui-tabview-r2l",this.stepSecondTransitionType="mui-tabview-r2l"},preStep:function(){this.showStep=!0,this.stepFirstTransitionType="mui-tabview-l2r",this.stepSecondTransitionType="mui-tabview-l2r"},reg:function(){Mui.regular.phone(this.phone)?/.+/.test(this.verify)?this.repeatpasswd!=this.passwd?Mui.message.toast({msg:"密码不一致"}):/.+/.test(this.passwd)?this.fastClick&&(this.fastClick=!1,Vue.http.get(url+"index.php?m=Api&c=User&a=Register",{phone:this.phone,passwd:this.passwd,auth_code:this.verify,confirm_pwd:this.repeatpasswd,register_client:this.client,mall_id:this.userdata.current_mall_id||1}).then(function(t){this.fastClick=!0,1==t.data.status?(localStorage.userdata=JSON.stringify(_.assign({},this.userdata,t.data.data)),window.location.href=url+"index.php"):Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){this.fastClick=!0,alert(t)}.bind(this))):Mui.message.toast({msg:"密码错误"}):Mui.message.toast({msg:"验证码错误"}):Mui.message.toast({msg:"手机号码错误"})},getVerify:function(){if(Mui.regular.phone(this.phone)){if(this.fastClick&&this.canSendVeri){this.canSendVeri=!1,this.fastClick=!1;var t=60,i=setInterval(function(){this.verifyContent=t+"秒后再次获取",t--,0==t&&(clearInterval(i),this.canSendVeri=!0,this.verifyContent="获取验证码")}.bind(this),1e3);Vue.http.get(url+"index.php?m=Api&c=User&a=authcode",{phone:this.phone}).then(function(t){this.fastClick=!0,1==t.data.status?Mui.message.toast({msg:"发送成功！"}):Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){this.fastClick=!0,alert(t)}.bind(this))}}else Mui.message.toast({msg:"手机号码错误"})},firstStepVerify:function(){Mui.regular.phone(this.phone)?/.+/.test(this.verify)?this.fastClick&&(this.fastClick=!1,Vue.http.get(url+"index.php?m=Api&c=User&a=checkcode",{phone:this.phone,auth_code:this.verify}).then(function(t){this.fastClick=!0,1==t.data.status?this.nextStep():Mui.message.toast({msg:t.data.info})}.bind(this))["catch"](function(t){this.fastClick=!0,alert(t)}.bind(this))):Mui.message.toast({msg:"验证码错误"}):Mui.message.toast({msg:"手机号码错误"})}}});